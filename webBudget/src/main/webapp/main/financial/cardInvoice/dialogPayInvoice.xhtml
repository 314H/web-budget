<!--
  Copyright (C) 2015 Arthur Gregorio, AG.Software
 
  This program is free software: you can redistribute it and/or modify
  it under the terms of the GNU General Public License as published by
  the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.
 
  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU General Public License for more details.
 
  You should have received a copy of the GNU General Public License
  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->

<p:dialog xmlns="http://www.w3.org/1999/xhtml"
          xmlns:p="http://primefaces.org/ui"
          xmlns:h="http://java.sun.com/jsf/html"
          xmlns:f="http://java.sun.com/jsf/core"
          xmlns:ui="http://java.sun.com/jsf/facelets"
          id="payInvoiceDialog" 
          width="400"
          modal="true" 
          closable="false"
          resizable="false" 
          widgetVar="dialogPayInvoice" 
          header="#{messages['card-invoice.dialog.payment']}">

    <h:form id="formPayInvoice" prependId="false">

        <div class="ui-grid ui-grid-responsive">
            <div class="ui-grid-row">
                <div class="ui-grid-col-12">
                    <p:messages closable="true" globalOnly="true" />
                </div>
            </div>
            <div class="ui-grid-row">
                <div class="ui-grid-col-12 form-group div-align-center">
                    <h:outputText escape="false" 
                                  value="#{messages['card-invoice.dialog.hint']}:"/>
                </div>
            </div>
            <div class="ui-grid-row">
                <div class="ui-grid-col-12 form-group form-group-l">
                    <p:outputLabel for="inCostCenter" 
                                   value="#{messages['card-invoice.dialog.cost-center']}: "/>
                    <p:selectOneMenu id="inCostCenter" 
                                     converter="omnifaces.SelectItemsConverter"
                                     value="#{cardInvoiceBean.cardInvoice.costCenter}" >
                        <p:ajax event="change" 
                                listener="#{cardInvoiceBean.loadMovementClasses()}" />
                        <f:selectItem itemValue="#{null}"
                                      noSelectionOption="true"
                                      itemLabel="#{messages['card-invoice.dialog.select-one']}" />
                        <f:selectItems var="costCenter" 
                                       itemValue="#{costCenter}"
                                       itemLabel="#{costCenter.name}"
                                       value="#{cardInvoiceBean.costCenters}" /> 
                    </p:selectOneMenu>
                </div>
            </div>
            <div class="ui-grid-row">
                <div class="ui-grid-col-12 form-group form-group-l">
                    <p:outputLabel for="inMovementClass" 
                                   value="#{messages['card-invoice.dialog.movement-class']}: "/>
                    <p:selectOneMenu id="inMovementClass" 
                                     converter="omnifaces.SelectItemsConverter"
                                     value="#{cardInvoiceBean.cardInvoice.movementClass}" >
                        <f:selectItem itemValue="#{null}"
                                      noSelectionOption="true"
                                      itemLabel="#{messages['card-invoice.dialog.select-one']}" />
                        <f:selectItems var="movementClass" 
                                       itemValue="#{movementClass}"
                                       itemLabel="#{movementClass.name}"
                                       value="#{cardInvoiceBean.movementClasses}" /> 
                    </p:selectOneMenu>
                </div>
            </div>
            <div class="ui-grid-row">
                <div class="ui-grid-col-12 form-group form-group-l">
                    <p:outputLabel for="inWallet" 
                                   value="#{messages['card-invoice.dialog.wallet']}: "/>
                    <p:selectOneMenu id="inWallet" 
                                     converter="omnifaces.SelectItemsConverter"
                                     value="#{cardInvoiceBean.cardInvoice.wallet}">
                        <f:selectItem itemValue="#{null}"
                                      noSelectionOption="true"
                                      itemLabel="#{messages['card-invoice.dialog.select-one']}" />
                        <f:selectItems var="wallet"
                                       itemValue="#{wallet}"
                                       itemLabel="#{wallet.friendlyName}"
                                       value="#{cardInvoiceBean.wallets}"/>
                    </p:selectOneMenu>
                </div>
            </div>
            <div class="ui-grid-row">
                <div class="ui-grid-col-12 div-align-center">
                    <p:commandButton immediate="true"
                                     onclick="PF('dialogPayInvoice').hide()"
                                     value="#{messages['card-invoice.dialog.cancel']}" />
                    <p:spacer width="10"/>
                    <p:commandButton styleClass="ui-button-warning"
                                     value="#{messages['card-invoice.dialog.pay']}"
                                     actionListener="#{cardInvoiceBean.payInvoice()}" />

                </div>
            </div>
        </div>
    </h:form>
</p:dialog>
