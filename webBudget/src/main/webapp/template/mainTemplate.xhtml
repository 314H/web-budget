<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:sec="http://www.springframework.org/security/tags">

    <h:head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

        <title>#{messages['application.title']}</title>

        <link rel="shortcut icon" type="image/x-icon" href="#{resource['images:favicon.ico']}"/>

        <script type="text/javascript" src="#{resource['js:locale.js']}" />

        <h:outputStylesheet library="css" name="custom.css" />
        <h:outputStylesheet library="css" name="style.css" />

        <ui:insert name="head" />
    </h:head>

    <h:body>
        <div class="container">
            <div class="header">
                <div class="header-content">
                    <div class="logo">
                        <h:link outcome="/main/dashboard.xhtml">
                            <p:graphicImage library="images" name="ui-wb-logo.png" />
                        </h:link>
                    </div>
                    <div class="menu">
                        <h:form id="menuForm" prependId="false">
                            <p:menubar styleClass="main-menu">
                                <p:submenu label="#{menu['entries']}" 
                                           styleClass="main-menu-item">
                                    <sec:authorize ifAnyGranted="#{permissionsBean.authority.CARD_VIEW}">
                                        <p:menuitem value="#{menu['entries.cards']}"    
                                                    url="/main/entries/cards/listCards.xhtml"/>
                                    </sec:authorize>
                                    <sec:authorize ifAnyGranted="#{permissionsBean.authority.WALLET_VIEW}">
                                        <p:menuitem value="#{menu['entries.wallets']}"
                                                    url="/main/entries/wallets/listWallets.xhtml"/>
                                    </sec:authorize>
                                    <sec:authorize ifAnyGranted="#{permissionsBean.authority.COST_CENTER_VIEW}">
                                        <p:menuitem value="#{menu['entries.cost-center']}"    
                                                    url="/main/entries/costCenter/listCostCenters.xhtml"/>
                                    </sec:authorize>
                                    <sec:authorize ifAnyGranted="#{permissionsBean.authority.MOVEMENT_CLASS_VIEW}">
                                        <p:menuitem value="#{menu['entries.movement-classes']}"
                                                    url="/main/entries/movementClass/listMovementClasses.xhtml"/>
                                    </sec:authorize>
                                </p:submenu>
                                <p:submenu styleClass="main-menu-item"
                                           label="#{menu['financial']}" >
                                    <sec:authorize ifAnyGranted="#{permissionsBean.authority.MOVEMENT_VIEW}">
                                        <p:menuitem value="#{menu['financial.movements']}"    
                                                    url="/main/financial/movement/listMovements.xhtml"/>
                                    </sec:authorize>
                                    <sec:authorize ifAnyGranted="#{permissionsBean.authority.CARD_INVOICE_VIEW}">
                                        <p:menuitem value="#{menu['financial.card-invoice']}"    
                                                    url="/main/financial/cardInvoice/generateCardInvoice.xhtml"/>
                                    </sec:authorize>
                                    <sec:authorize ifAnyGranted="#{permissionsBean.authority.BALANCE_TRANSFER_VIEW}">
                                        <p:menuitem value="#{menu['financial.transfers']}"    
                                                    url="/main/financial/transfer/listTransfers.xhtml"/>
                                    </sec:authorize>
                                </p:submenu>
                                <p:submenu styleClass="main-menu-item"
                                           label="#{menu['miscellany']}" >
                                    <sec:authorize ifAnyGranted="#{permissionsBean.authority.CLOSING_VIEW}">
                                        <p:menuitem value="#{menu['miscellany.closing']}"    
                                                    url="/main/miscellany/closing/closeFinancialPeriod.xhtml"/>
                                    </sec:authorize>
                                    <sec:authorize ifAnyGranted="#{permissionsBean.authority.FINANCIAL_PERIOD_VIEW}">
                                        <p:menuitem value="#{menu['miscellany.financial-periods']}"    
                                                    url="/main/miscellany/financialPeriod/listFinancialPeriods.xhtml"/>
                                    </sec:authorize>
                                </p:submenu>
                                <p:submenu label="#{menu['tools']}" 
                                           styleClass="main-menu-item">
                                    <sec:authorize ifAnyGranted="#{permissionsBean.authority.ACCOUNTS_VIEW}">
                                        <p:menuitem value="#{menu['tools.users']}"    
                                                    url="/main/tools/users/listUserAccounts.xhtml"/>
                                    </sec:authorize>
                                    <sec:authorize ifAnyGranted="#{permissionsBean.authority.PRIVATE_MESSAGES_VIEW}">
                                        <p:menuitem value="#{menu['tools.private-messages']}"    
                                                    url="/main/tools/privateMessages/listPrivateMessages.xhtml"/>
                                    </sec:authorize>
                                </p:submenu>

                                <f:facet name="options">
                                    <p:menuButton id="btSession"
                                                  iconPos="left"
                                                  styleClass="session-button"
                                                  value="#{dashboardBean.currentUserName}">
                                        <p:menuitem value="#{menu['dashboard.logout']}" 
                                                    action="#{dashboardBean.doLogout()}"/>
                                        <p:menuitem value="#{menu['dashboard.account']}" 
                                                    action="/main/tools/users/accountPreferences.xhtml?faces-redirect=true"/>
                                    </p:menuButton>
                                </f:facet>
                            </p:menubar>
                        </h:form>
                    </div>
                </div>	
            </div>
            <div class="breadcrumb">
                <div class="breadcrumb-content">
                    <p:breadCrumb homeDisplay="text">
                        <p:menuitem value="#{breadcrumb['home']}"
                                    url="/main/home.xhtml" />
                        <ui:insert name="breadcrumb" />
                    </p:breadCrumb>
                </div>
            </div>
            <div class="content">
                <div class="content-content">
                    <div class="ui-grid ui-grid-responsive">
                        <div class="ui-grid-row">
                            <div class="ui-grid-col-12">
                                <ui:insert name="content" />
                            </div> 
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="footer">
            <div class="footer-content">
                <div class="footer-logo">
                    
                </div>
                <div class="footer-text">
                    <h:outputText escape="false" 
                                  value="#{messages['application.version']}: #{dashboardBean.version}"/>
                </div>
            </div>
        </div>
        
        <ui:insert name="popups" />

        <div style="clear: both"/>
    </h:body>
</html>

